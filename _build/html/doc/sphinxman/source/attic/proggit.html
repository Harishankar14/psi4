<!DOCTYPE html>

<html lang="English" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>&lt;no title&gt; &#8212; Psi4 Documentation 1.11 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=61cd365c" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css?v=12dfc556" />
    <script src="../../../../_static/documentation_options.js?v=29ef4520"></script>
    <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>%
% PSI Programmer's Manual
%
% SVN Revision Control Section
% (formerly CVS)
%
% TDC, February, 1996
% Modified by TDC, December 2002
% Updated from CVS to SVN, April 2007
%</p>
<dl class="simple">
<dt>The subversion control system (SVN) (htmladdnormallink{{tt</dt><dd><p>subversion.tigris.org}}{<a class="reference external" href="http://subversion.tigris.org/">http://subversion.tigris.org/</a>}) provides a</p>
</dd>
</dl>
<p>convenient means by which programmers may obtain the latest (or any
previous) version of the PSIfoursource from the main repository or
a branch version, add new code to the source tree or modify existing
PSIfourmodules, and then make changes and additions available to
other programmers by checking the modifications back into the main
repository.  SVN also provides a <a href="#id1"><span class="problematic" id="id2">``</span></a>safety net'' in that any erroneous
modifications to the code may be easily removed once they have been
identified.  This section describes how to use SVN to access and
modify the PSIfoursource code.  (Note that compilation and
installation instructions are given in a separate document.)</p>
<p>The main repository for the PSIfourSource code is currently
maintained by the Crawford group at Virginia Tech.  To check out the
code, one must first obtain an SVN account by emailing
htmladdnormallink{{tt <a class="reference external" href="mailto:crawdad&#37;&#52;&#48;vt&#46;edu}}{mailto">crawdad<span>&#64;</span>vt<span>&#46;</span>edu}}{mailto</a>:<a class="reference external" href="mailto:crawdad&#37;&#52;&#48;vt&#46;edu">crawdad<span>&#64;</span>vt<span>&#46;</span>edu</a>}.
After you have a login-id and password, you are now ready to access
the repository via a secure, SSL-based WebDAV connection, but first
you must decide which version of the code you need.</p>
<p>The PSIfourSVN repository contains three top-level directories:
begin{itemize}
item {tt trunk}: The main development area.
item {tt branches}: Release branches and private development</p>
<blockquote>
<div><p>branches are stored here.</p>
</div></blockquote>
<dl class="simple">
<dt>item {tt tags:} Snapshots of the repository corresponding to public</dt><dd><p>releases are stored here and should {em never} be modified.</p>
</dd>
</dl>
<p>end{itemize}
If you have a PSI4 SVN account, you can peruse these directories if
you like by pointing web browser to:</p>
<p>noindent
{tt <a class="reference external" href="https://sirius.chem.vt.edu/svn/psi4/">https://sirius.chem.vt.edu/svn/psi4/</a>}</p>
<p>subsection{PSIfourSVN Policies: Which Branch Should I Use?}
label{section:branches}</p>
<p>The PSIfourrepository comprises a main trunk and several
release branches.  The branch you should use depends on the sort of
work you plan for the codes:
begin{enumerate}
item For any piece of code already in the most recent release, bug</p>
<blockquote>
<div><p>fixes (defined as anything that doesn't add functionality ---
including documentation updates) should be made {em only} on the
most recent stable release branch.</p>
</div></blockquote>
<dl class="simple">
<dt>item The main trunk is reserved for development of new functionality.</dt><dd><p>This allows us to keep new, possibly unstable code away from public
access until the code is ready.</p>
</dd>
<dt>item Code that you do not want to put into next major release of</dt><dd><p>PSIfourshould be put onto a separate branch off the main
trunk. You will be solely responsible for maintenance of the new
branch, so you should read the SVN manual before attempting this.</p>
</dd>
</dl>
<p>end{enumerate}</p>
<p>noindent Fig.~ref{Fig:svn} provides a schematic of the SVN revision-control
structure and branch labeling.  Two release branches are shown, the current
stable branch, named {tt psi-3-4}, and a planned future release, to be named
{tt psi-3-5}.  The tags on the branches indicate release shapshots, where
bugs have been fixed and the code has been or will be exported for public
distribution.  The dotted lines in the figure indicate merge points: just
prior to each public release, changes made to the code on the stable release
branch will be merged into the main trunk.</p>
<p>begin{figure}[h]
begin{center}
epsfig{file=svn/svn.eps,height=6.5cm}
end{center}
caption{PSIfourSVN branch structure with examples of branch- and
release-tag labelling.}
label{Fig:svn}
end{figure}</p>
<p>noindent A frequently encountered problem is what to do about bug fixes
that are necessary for uninterrupted code development of the code on the
main trunk. As Rule 1 of the above policy states, all bug fixes of the code
already in the recent stable release must go on the corresponding branch,
not on the main trunk. The next step depends on the severity of the bug:
begin{enumerate}
item If the bug fix is critical and potentially affects every</p>
<blockquote>
<div><p>developer of the code on the main trunk, then PSIfouradministrators should be notified of the fix. If deemed necessary,
appropriate steps to create a new patch release will be made. Once
the next patch release is created then the bug fixes will be merged
onto the main trunk.  If the bug fix doesn't warrant an immediate
new patch release, then you can incorporate the bug fix into your
local copy of the main trunk code manually or using SVN merge
features. This will allow you to continue development until next
patch release is created and the bug fix is incorporated into the
main trunk code in the repository. However you should {em never}
merge such changes into the main trunk yourself.</p>
</div></blockquote>
<dl class="simple">
<dt>item If the bug fix is not critical (e.g. a documentation</dt><dd><p>update/fix), then you should wait until next patch release when it
will be merged into the main trunk automatically.</p>
</dd>
</dl>
<p>end{enumerate}</p>
<p>noindent
The following are some of the most commonly used SVN commands for checking
out and updating working copies of the PSIfoursource code.</p>
<p>noindent
$bullet$ To checkout a working copy of the head of the main trunk:</p>
<p>{tt svn co <a class="reference external" href="https://sirius.chem.vt.edu/svn/psi4/trunk/">https://sirius.chem.vt.edu/svn/psi4/trunk/</a> psi4}</p>
<p>noindent
$bullet$ To check out a working copy of the head of a specific release branch,
e.g., the branch labelled {tt psi-4-0}:</p>
<p>{tt svn co <a class="reference external" href="https://sirius.chem.vt.edu/svn/PSI4/branches/psi-4-0">https://sirius.chem.vt.edu/svn/PSI4/branches/psi-4-0</a> psi4}</p>
<p>noindent Note that subsequent {tt svn update} commands in this
working copy will provide updates only on the chosen branch.  Note
also that after you have checked out a fresh working copy of the code
you must run the {tt autoconf} command to generate a {tt configure}
script for building the code.  (See the installation manual for
configuration, compilation, and testing instructions.)</p>
<p>noindent For each of the above commands, the working copy of your
code will be placed in the directory file{psi4}, regardless of your
choice of branch.  In this manual, we will refer to this directory
from now on as {tt $PSI4}.  Subsequent SVN commands are usually run
within this top-level directory.</p>
<p>noindent
$bullet$ To update your current working copy to include the latest revisions:</p>
<p>{tt svn update}</p>
<p>noindent
Notes: (a) This will update only the revisions on your current branch;
(b) The old {tt -d} and {tt -P} flags required by CVS are not necessary with SVN.</p>
<p>noindent
$bullet$ To convert your working copy to the head of a specific branch:</p>
<p>{tt svn switch <a class="reference external" href="https://sirius.chem.vt.edu/svn/PSI4/branches/psi-4-0">https://sirius.chem.vt.edu/svn/PSI4/branches/psi-4-0</a>}</p>
<p>noindent
$bullet$ To convert your working copy to the head of the main trunk:</p>
<p>{tt svn switch <a class="reference external" href="https://sirius.chem.vt.edu/svn/psi4/trunk/">https://sirius.chem.vt.edu/svn/psi4/trunk/</a>}</p>
<p>noindent
$bullet$ To find out what branch your working copy is on, run this in your
top-level PSIfoursource directory:</p>
<p>{tt svn info | grep URL}</p>
<p>noindent
This will return the SVN directory from which your working copy was
taken, e.g.,</p>
<p>noindent
{tt URL: <a class="reference external" href="https://sirius.chem.vt.edu/svn/PSI4/branches/psi-4-0">https://sirius.chem.vt.edu/svn/PSI4/branches/psi-4-0</a>}</p>
<p>noindent
Some words of advice:
begin{enumerate}
item Most SVN commands are reasonably safe,</p>
<dl class="simple">
<dt>item Unlike CVS, you shouldn't use {tt svn update} to see the status</dt><dd><p>of your working copy.  With SVN you should use {tt svn status} to
see if you've modified any files or directories.  If you want a
direct comparison with the repository, you should use {tt svn status -u}.</p>
</dd>
</dl>
<p>item Read the SVN manual.  Seriously.
begin{center}
htmladdnormallink{{tt
<a class="reference external" href="http://svnbook.red-bean.com/">http://svnbook.red-bean.com/</a>}}{<a class="reference external" href="http://svnbook.red-bean.com/">http://svnbook.red-bean.com/</a>}
end{center}
item If you're about to start some significant development or bug-fixes,
first update your working copy to the latest version on your branch.
In addition, if you do development over a long period of time (say weeks to
months) on a specific module or modules, be sure to run a {tt svn status -u}
occasionally. In can be {em very} frustrating to try to check in lots
of changes, only to find out that the PSIfourhas changed dramatically
since your last update.
end{enumerate}</p>
<p>subsection{Checking in altered PSIfourbinaries or libraries}</p>
<p>If you have changes to Psi binaries or libraries which already exist, one
of two series of steps is necessary to check these changes in to the main
repository. The first series may be followed if all changes have been made
only to files which already exist in the current version. The second series
should be followed if new files must be added to the code in the repository.</p>
<p>begin{itemize}
item No new files need to be added to the repository. We will use
library{libciomr} as an example.
begin{enumerate}
item {tt cd $PSI4/src/lib/libciomr}
item {tt svn ci -m <a href="#id3"><span class="problematic" id="id4">``</span></a>Put comments here.''}
end{enumerate}
item New files must be added to the repository. Again, we use
library{libciomr}
as an example. Suppose the new file is named file{great_code.cc} .
begin{enumerate}
item {tt cd $PSI4/src/lib/libciomr}
item {tt svn add great_code.cc}
item {tt svn ci -m <a href="#id5"><span class="problematic" id="id6">``</span></a>Put comments here.''}
end{enumerate}
end{itemize}</p>
<p>The file{svn ci} command in both of these sequences will examine all
of the code in the current file{libciomr} directory against the
current version of the code in the main repository. Any files which
have been altered (and for which no conflicts with newer versions
exist!) will be identified and checked in to the main repository (as
well as the new file in the second situation).</p>
<p>SVN requires that you include a comment on your changes.  However,
unlike CVS, SVN prefers that you put your comments on the command-line
rather than editing a text file.  I prefer the CVS way, but this is a
minor pain compared to all the advantages of SVN, in my opinion.</p>
<p>subsection{Adding entirely new code to the main PSIfourrepository}
label{checkin_new}</p>
<p>If the programmer is adding a new executable module or library to the
PSIfourrepository, a number of important conventions should be followed:</p>
<p>begin{enumerate}
item Since such changes almost always involve additional functionality,
new modules or libraries should be added only on the main SVN trunk.
See section ref{section:branches} for additional information.</p>
<dl class="simple">
<dt>item The directory containing the new code should be given a name</dt><dd><p>that matches the name of the installed code (e.g. if the code will
be installed as module{newcode}, the directory containing the code
should be named file{newcode}). New executable modules must be
placed in shellvar{$PSI4}file{/src/bin} and libraries in
shellvar{$PSI4}file{/src/lib} of the user's working copy.</p>
</dd>
<dt>item The Makefile should be converted to an input file for the</dt><dd><p>configure script (file{Makefile.in} --- see any of the current
PSIfourbinaries for an example) and should follow the
conventions set up in all of the current PSIfourfile{Makefiles}. This includes use of file{MakeVars} and
file{MakeRules}.</p>
</dd>
<dt>item New binaries should be added to the list contained in</dt><dd><p>shellvar{$PSI4}file{/src/bin/Makefile.in} so that they will be
compiled automatically when a full compilation of the PSIfourdistribution occurs. This step is included in the sequence below.</p>
</dd>
<dt>item A documentation page should be included with the new code (see</dt><dd><p>section ref{Documentation} for more information). As a general
rule, if the code is not ready to have a documentation page, it is
not ready to be installed in PSIfour.</p>
</dd>
<dt>item The file{configure.ac} file must be altered so that users may</dt><dd><p>check out copies of the new code and so that the file{configure}
script will know to create the Makefile for the new code. These
steps are included in the sequence below.</p>
</dd>
</dl>
<p>end{enumerate}</p>
<p>Assume the new code is an executable module and is named
module{great_code}. The directory containing the new code must
contain only those files which are to be checked in to the repository!
Then the following steps will check in a new piece of code to the main
repository:</p>
<p>begin{enumerate}
item {tt cd $PSI4/src/bin}
item {tt svn add great_code}
item {tt svn ci -m <a href="#id7"><span class="problematic" id="id8">``</span></a>Put comments here.''}
item {tt cd $PSI4}
item Edit file{configure.ac} and add file{great_code} to the list.
item {tt svn ci configure.ac -m <a href="#id9"><span class="problematic" id="id10">``</span></a>Put comments here.''}
item {tt autoconf}
item {tt cd $PSI4/src/bin}
item Edit file{Makefile.in} and add file{great_code} to the list.
item {tt svn ci Makefile.in -m <a href="#id11"><span class="problematic" id="id12">``</span></a>Put comments here.''}
end{enumerate}
At this point, all of the code has been properly checked in, but you
should also test to make sure that the code can be checked out by
other programmers, and that it will compile correctly. The following
steps will store your personal version of the code, check out the new
code, and test-compile it:
begin{enumerate}
item {tt cd $PSI4/src/bin}
item {tt mv great_code great_code.bak}
item {tt cd $PSI4/..}
item {tt svn update}
item {tt cd $objdir}
item {tt $PSI4/configure -}{tt -prefix=$prefix}
item {tt cd src/bin/great_code}
item {tt make install}
end{enumerate}
(Note that $prefix and $objdir to the installation and compilation</p>
<blockquote>
<div><p>directories defined in the PSIfourinstallation instructions.)</p>
</div></blockquote>
<p>Your original version of the code remains under file{great_code.bak},
but should be no longer necessary if the above steps work. Note that it is
necessary to re-run file{configure} explicitly, instead of just running
file{config.status}, because the latter contains no information about
the new code.</p>
<p>subsection{Updating checked out code}</p>
<p>If the code in the main repository has been altered, other users' working
copies will of course not automatically be updated.  In general, it is
only necessary to execute the following steps in order to completely update
your working copy of the code:</p>
<p>begin{enumerate}
item {tt cd $PSI4}
item {tt svn update}
end{enumerate}</p>
<p>This will examine each entry in your working copy and compare it to
the most recent version in the main repository. When the file in the
main repository is more recent, your version of the code will be
updated. If you have made changes to your version, but the version in
the main repository has not changed, the altered code will be
identified to you with an <a href="#id13"><span class="problematic" id="id14">``</span></a>M''. If you have made changes to your
version of the code, and one or more newer versions have been updated
in the main repository, SVN will examine the two versions and attempt
to merge them -- this process often reveals conflicts, however, and is
sometimes unsuccessful. You will be notified of any conflicts that
arise (labelled with a <a href="#id15"><span class="problematic" id="id16">``</span></a>C'') and you must resolve them manually.</p>
<p>If new directories have been added to the repository, the update above
will automatically add them to your working copy.  However, you may
need to re-run {tt autoconf} and configure ({tt</p>
<blockquote>
<div><p>$objdir/config.status --recheck} is a convenient command) to be</p>
</div></blockquote>
<p>able to build the new code.</p>
<p>subsection{Removing code from the repository}
If alterations of libraries or binaries under Psi involves the deletion of
source code files from the code, these must be explicitly removed through SVN.</p>
<p>The following steps will remove a source code file named file{bad_code.F}
from a binary module named module{great_code}:
begin{enumerate}
item {tt cd $PSI4/src/bin/great_code}
item {tt svn remove bad_code.F}
item {tt svn ci -m <a href="#id17"><span class="problematic" id="id18">``</span></a>Put comments here.''}
end{enumerate}</p>
<p>subsection{Checking out older versions of the code}
It is sometimes necessary to check out older versions of a piece of code.
Assume we wish to check out an old version of PSIdetci. If this
is the case, the following steps will do this:
begin{enumerate}
item {tt cd $PSI4/src/bin/detci}
item {tt svn co --revision {2002-02-17}}
end{enumerate}</p>
<p>This will check the main repository and provide you with the code as
it stood exactly on February 17th, 2002.</p>
<p>subsection{Examining the revision history}
It can be very useful to use cvs to see what recent changes have been
made to the code.  Anytime one checks in a new version of a file, SVN
requires the user to provide comments on the changes with the {tt -m}
flag.  These comments go into a log information that may be easily
accessed through SVN.  To see what changes have been made recently to
the file file{detci.cc}, one would go into the file{detci} source
directory and type
begin{verbatim}
svn log detci.cc
end{verbatim}
Checking the log files is a very useful way to see what recent changes might
be causing new problems with the code.</p>
<p>subsection{The structure of the PSIfourSource Tree}
label{psitree}</p>
<p>Your working copy of the PSIfoursource code includes a number of
important subdirectories:</p>
<p>begin{itemize}
item shellvar{$PSI4}file{/lib} -- Source files for</p>
<blockquote>
<div><p>OS-independent <a href="#id19"><span class="problematic" id="id20">``</span></a>library'' data.  This includes the main basis set
data file (file{pbasis.dat}) and the PSIfourprogram execution
control file (file{psi.dat}), among others.  These files are
installed in file{$prefix/share}.</p>
</div></blockquote>
<dl class="simple">
<dt>item shellvar{$PSI4}file{/include} -- Source files for</dt><dd><p>OS-independent header files, including file{physconst.h} (whose
contents should be obvious from its name), file{psifiles.h}, and
file{ccfiles.h}, among others.  These files are installed in
$prefix/include.</p>
</dd>
<dt>item shellvar{$PSI4}file{/src/util} -- Source code for the utility</dt><dd><p>program module{tocprint}.  (Note that the module{tmpl} module is
no longer used and will eventually disappear.)</p>
</dd>
<dt>item shellvar{$PSI4}file{/src/lib} -- Source code for the</dt><dd><p>libraries, including library{libpsio}, library{libipv1},
library{libchkpt}, etc.  The include files from the library
source are used directly during the compilation of PSI to
avoid problems associated with incomplete installations.  Some
include files are architecture-dependent and go in an include
subdirectory of the compilation (object) directory.</p>
</dd>
<dt>item shellvar{$PSI4}file{/src/bin} -- Source code for the</dt><dd><p>executable modules.</p>
</dd>
</dl>
<p>end{itemize}</p>
<p>After compilation and installation, the file{$prefix} directory
contains the executable codes and other necessary files.  {bf NB:}
The files in this area should never be directly modified; rather, the
working copy should be modified and the PSIfourfile{Makefile}
hierarchy should handle installation of any changes.  The structure of
the installation area is:</p>
<p>begin{itemize}
item file{$prefix/bin} -- The main executable directory.  This</p>
<blockquote>
<div><p>directory must be in your path in order for the driver program,
module{PSI4}, to find the modules.</p>
</div></blockquote>
<dl class="simple">
<dt>item file{$prefix/lib} -- The PSIfourcode libraries.  (NB: The</dt><dd><p>description of PSIfourfile{Makefiles} later in this manual will
explain how to use the libraries.)</p>
</dd>
<dt>item file{$prefix/include} -- Header files.  These are not actually</dt><dd><p>used during the compilation of PSI but are useful for inclusion by
external programs because they are all in the same directory.</p>
</dd>
<dt>item file{$prefix/share} -- OS-independent data files, including</dt><dd><p>basis set information.  (Do not edit this file directly; any changes
you make can be overwritten by subsequent {tt make} commands.)</p>
</dd>
<dt>item file{$prefix/doc} -- PSIfourdocumentation, including</dt><dd><p>installation, programmer, and user manuals.</p>
</dd>
</dl>
<p>end{itemize}</p>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">Psi4 Documentation</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Harishankar.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../../../_sources/doc/sphinxman/source/attic/proggit.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>