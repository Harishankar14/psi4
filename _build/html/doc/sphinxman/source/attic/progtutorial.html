<!DOCTYPE html>

<html lang="English" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>&lt;no title&gt; &#8212; Psi4 Documentation 1.11 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=61cd365c" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css?v=12dfc556" />
    <script src="../../../../_static/documentation_options.js?v=29ef4520"></script>
    <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>As noted previously, we want to start from a code that's not too tightly
integrated with the PSIfourcode itself, so we begin with a file{Makefile}
that will allow us to write a standalone code that includes all requisite PSIlibraries.  We're going to write a small sample code that generates integrals,
which involves two just two source files.  We begin by defining a
file{Makefile} that will include all of the PSIfourlibraries and header
files, so that we can take full advantage of the wide range of features
implemented without having to worry about the details of their implementation.</p>
<p>includesource{sample-codes/integrals/Makefile}{make}</p>
<p>Only a few lines of this makefile need to be modified to utilize it for other
programming projects; we'll concentrate on them.  On the second line, we define
the name of the executable to be generated, in this example we opt for the
unimaginative title of module{integrals}.  Line 4 provides the list of source files
that the project comprises; these will be detailed below.  The top source
directory for the PSIfourinstallation and the top object directory (where
PSIfourwas compiled) should be provided on lines 6 and 8, respectively.
Lines 10 and 11 describe the flags needed to link in the module{BLAS} and
module{LAPACK} libraries and might need a combination of <a href="#id1"><span class="problematic" id="id2">``</span></a>file{-L
folder_name}'' and <a href="#id3"><span class="problematic" id="id4">``</span></a>file{-l library_name}'', depending on your system's
setup.  Finally, the compiler and flags are detailed on lines 12--17.  It's a
good idea to use the flags described on line 16 for development; they speed up
code compilation and provide lots of information for standard debugging tools.
As noted in the file{Makefile} itself, nothing below line 17 should require
modification for any other PSIfourproject.</p>
<p>The PSIfourdriver program provides a lot of functionality that we forgo in
writing a standalone code; this is instead emulated in the {tt main.cc} file,
shown below.</p>
<p>includesource{sample-codes/integrals/main.cc}{C++}</p>
<p>All modules in PSIfourmust have the argument list and return type shown on
line 13.  The possible return types, defined by an enumeratable constant are
documented in file{psi4-dec.h}, which lives in $PSI4/include.  Notice that
all of the code must live in it's own namespace within the module{psi}
namespace, in this case it's in the module{psi::integrals} namespace.  Without
this nesting, functions belonging to different parts of the code, but having
the same name, would cause conflicts.  The module{read_options} function is
responsible for setting up the module{Options} object, which contains the list
of user-provided options.  Lines 25--32 are important - these provide the list
of keywords expected by the code, their types, and their default values (if
any).  This part of the code will be inserted into the PSIfourdriver when
the module is ready for merging with the PSIfourdistribution; this process
will be detailed later in the chapter.  Notice the special format of the
comments on lines 27 and 30.  These are still valid module{C++} comments, but
the extra hyphens inside are essential in this context.  Whenever adding any
options for any module, you must comment them as shown - this will ensure that
the keywords are automatically inserted into the PSIfourusers' manual.  The
module{main} function does a little setting up of the PSIinput and output
environments, before calling the module code we're developing (on line 53) and
shutting down the PSIfourI/O systems.</p>
<p>The module we're developing is in the following source file.</p>
<p>includesource{sample-codes/integrals/integrals.cc}{C++}</p>
<p>Given the extensive documentation within the code, we'll not describe this file
line-by-line; however, some points warrant elaboration.  Notice that the entire
module is encapsulated in the module{psi::integrals} namespace (lines 6 and
92).  This simple example has only one function body, which lives in a single
source file - if more functions and/or source files were added, these too would
have to live in the module{psi::integrals} namespace.  On lines 29 and 31 of
file{main.cc} we told the parser which keywords to expect, and provided
default values in case the user omited them from the input.  This makes
retrieving these options very clean and simple ({it c.f.} lines 11 and 12 of
file{integrals.cc}).  Each PSIfourmodule will have to initialize its own
local module{PSIO} and module{Chkpt} objects to perform I/O and to retrieve
information from previously run modules.  Notice that these objects are created
within smart pointers (see section XXX for more information) so that they are
automatically deleted when they go out of scope, thus reducing the burden on
the programmer.  Likewise, the basis sets, matrices and integral objects are
allocated using smart pointers.</p>
<p>The code described above can be built by simply typing <a href="#id5"><span class="problematic" id="id6">``</span></a>make'' on the command
line.  To run this code, you must first run the module{input} module to read
in the basis set information.  A PSIinput for this code should look some
thing like the following:</p>
<p>includeinput{sample-codes/integrals/input.dat}</p>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">Psi4 Documentation</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Harishankar.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../../../_sources/doc/sphinxman/source/attic/progtutorial.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>